#!/bin/bash

# üßπ –°–∫—Ä–∏–ø—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤ –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞ VOBVOROT

echo "üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è MCP —Å–µ—Ä–≤–µ—Ä–æ–≤ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ AI –∞–≥–µ–Ω—Ç–∞..."
echo ""

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
stop_mcp_server() {
    local server_name=$1
    echo -n "  –û—Å—Ç–∞–Ω–æ–≤–∫–∞ $server_name... "
    
    # –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
    if pgrep -f "mcp-server-$server_name" > /dev/null 2>&1; then
        pkill -TERM -f "mcp-server-$server_name" 2>/dev/null
        echo "‚úÖ"
    else
        echo "‚è≠Ô∏è  (–Ω–µ –∑–∞–ø—É—â–µ–Ω)"
    fi
}

echo "üìä –¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:"
vm_stat | grep -E "Pages (free|active|inactive|speculative|wired)" | head -5
echo ""

echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–Ω—É–∂–Ω—ã—Ö MCP —Å–µ—Ä–≤–µ—Ä–æ–≤:"
echo ""

# –ú–∞—Å—Å–∏–≤ –Ω–µ–Ω—É–∂–Ω—ã—Ö –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤
unnecessary_servers=(
    "brave-search"
    "youtube-data"
    "docker"
    "terraform"
    "vercel"
    "sentry"
    "supabase"
    "figma"
    "playwright"
    "browser-tools"
    "context7"
    "riza-code-interpreter"
    "jira"
    "serena"
    "ref"
)

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∫–∞–∂–¥—ã–π –Ω–µ–Ω—É–∂–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
for server in "${unnecessary_servers[@]}"; do
    stop_mcp_server "$server"
done

echo ""
echo "‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
echo ""
echo "üîµ –ê–∫—Ç–∏–≤–Ω—ã–µ MCP —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞:"
echo "  ‚Ä¢ filesystem - —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞"
echo "  ‚Ä¢ github - –≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ –¥–µ–ø–ª–æ–π"
echo "  ‚Ä¢ gemini - AI –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π"
echo "  ‚Ä¢ postgres - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–∞"
echo "  ‚Ä¢ memory - –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤"
echo ""

echo "üíæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:"
vm_stat | grep -E "Pages (free|active|inactive|speculative|wired)" | head -5
echo ""

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
echo "üßπ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞:"
echo -n "  –û—á–∏—Å—Ç–∫–∞ npm –∫–µ—à–∞... "
npm cache clean --force > /dev/null 2>&1
echo "‚úÖ"

echo -n "  –û—á–∏—Å—Ç–∫–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∫–µ—à–∞... "
sudo purge > /dev/null 2>&1 || echo "‚ö†Ô∏è  (—Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ sudo)"

echo ""
echo "üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:"
echo "  1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Claude Code –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π"
echo "  2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ 4OZEN"
echo "  3. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ Context Engineering –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤"
echo ""
echo "üöÄ –ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ AI –∞–≥–µ–Ω—Ç–∞!"